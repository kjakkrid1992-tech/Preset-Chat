<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Preset ‡∏ï‡∏≠‡∏ö‡πÅ‡∏ä‡∏ó V2.4 ‚Äî Data Complete & UI Refresh</title>
  <style>
    :root{
      --bg:#f7f8fb;--text:#0b1220;--muted:#6b7280;--card:#fff;--card2:#f3f6fb;--line:#e5e9f2;
      --accent:#2563eb;--accent-2:#1e40af;--shadow:0 8px 24px rgba(18,41,76,.07);--tap:44px;
      --house:#2563eb; --house-bg:#eaf1ff; --house-fg:#1e3a8a; --house-br:#cfe0ff;
      --inn:#10b981; --inn-bg:#eafff6; --inn-fg:#065f46; --inn-br:#caffdf;
      --danger: #dc2626; --danger-bg: #fee2e2;
    }
    :root[data-theme='dark'] {
      --bg: #111827; --text: #f3f4f6; --muted: #9ca3af; --card: #1f2937; --card2: #374151; --line: #4b5563;
      --accent: #3b82f6; --accent-2: #60a5fa; --shadow: 0 8px 24px rgba(0,0,0,.15);
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font:16px/1.55 Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; transition: background .2s, color .2s;}
    .wrap{max-width:920px;margin:10px auto;padding:0 12px}
    .hdr{display:flex;gap:8px;align-items:center;justify-content:space-between;margin-bottom:6px;flex-wrap:wrap}
    h1{margin:0;font-size:18px;font-weight:700}
    .controls{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    .seg{display:inline-flex;border:1px solid var(--line);background:var(--card);border-radius:999px;overflow:hidden;box-shadow:var(--shadow)}
    .seg button{padding:8px 12px;border:0;background:transparent;color:var(--muted);cursor:pointer;min-height:var(--tap);font-size:14px}
    .seg button[aria-pressed="true"]{background:var(--accent);color:#fff}
    .theme-toggle, .reset-btn{padding:8px 12px;border:1px solid var(--line);background:var(--card);color:var(--text);border-radius:999px;cursor:pointer;min-height:var(--tap);font-size:14px;box-shadow:var(--shadow)}
    .reset-btn { background: var(--danger-bg); color: var(--danger); border-color: var(--danger); }
    .toolbar{position:sticky;top:0;z-index:5;background:linear-gradient(var(--bg),var(--bg));padding:8px 0 10px}
    .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .field{display:flex;align-items:center;gap:8px;background:var(--card);border:1px solid var(--line);border-radius:14px;padding:10px 14px;box-shadow:var(--shadow);min-width:260px;flex:1}
    .field input{border:0;outline:0;background:transparent;color:var(--text);font-size:16px;min-width:160px}
    .list{display:flex;flex-direction:column;gap:10px}
    .section{display:flex;gap:8px;align-items:center;padding:6px 4px 0;margin-top:6px;font-weight:800}
    .section .dot{width:8px;height:8px;border-radius:50%;background:linear-gradient(180deg,var(--accent),var(--accent-2));opacity:.75}
    .item{display:grid;grid-template-columns:1fr auto;gap:8px;align-items:center;background:var(--card);border:1px solid var(--line);border-radius:14px;padding:10px 12px;box-shadow:var(--shadow);border-left:4px solid transparent}
    .i-main{min-width:0; cursor: pointer; position: relative; padding-right: 24px;}
    .i-main::after {
        content: '‚ñº'; position: absolute; right: 4px; top: 4px;
        font-size: 12px; color: var(--muted); transition: transform 0.2s;
    }
    .item.expanded .i-main::after { transform: rotate(180deg); }
    .i-title{font-weight:700;font-size:15px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
    .i-sub{font:12.5px ui-monospace,Menlo,Consolas,monospace;color:var(--muted)}
    .i-actions{display:flex;gap:8px;flex-wrap:wrap}
    .i-badge{margin-bottom:4px}
    .badge{display:inline-flex;align-items:center;gap:6px;border-radius:999px;padding:2px 8px;border:1px solid; font-size:12.5px;font-weight:700; letter-spacing:.2px}
    .badge .dot{width:8px;height:8px;border-radius:50%}
    .item.house{border-left-color:var(--house)}
    .badge.house{background:var(--house-bg);color:var(--house-fg);border-color:var(--house-br)}
    .badge.house .dot{background:var(--house)}
    .item.inn{border-left-color:var(--inn)}
    .badge.inn{background:var(--inn-bg);color:var(--inn-fg);border-color:var(--inn-br)}
    .badge.inn .dot{background:var(--inn)}
    button{cursor:pointer;border:1px solid var(--line);background:var(--card);color:var(--text);padding:10px 12px;border-radius:12px;font-size:14px;min-height:var(--tap)}
    button.primary{background:var(--accent);color:#fff;border-color:var(--accent-2)}
    .preview{ display:block; margin-top:8px; max-height: 40px; overflow: hidden; position: relative; transition: max-height 0.3s ease-out; }
    .preview::after { content: ''; position: absolute; bottom: 0; left: 0; right: 0; height: 20px; background: linear-gradient(transparent, var(--card)); pointer-events: none; }
    .item.expanded .preview { max-height: 500px; overflow: auto; }
    .item.expanded .preview::after { display: none; }
    pre{white-space:pre-wrap;background:var(--card2);border:1px dashed var(--line);border-radius:12px;padding:12px;margin:0;font-size:14px}
    .toast{position:fixed;right:12px;bottom:12px;background:#0f172a;color:#cde5ff;border:1px solid #21304d;padding:10px 12px;border-radius:10px;opacity:0;transform:translateY(8px);transition:.2s;z-index:1500;font-size:13px}
    .toast.show{opacity:1;transform:translateY(0)}
    .fab{position:fixed;right:16px;bottom:16px;z-index:1100;display:none;align-items:center;justify-content:center;width:56px;height:56px;border-radius:999px;border:0;background:var(--accent);color:#fff;font-size:22px;box-shadow:0 10px 26px rgba(37,99,235,.35);cursor:pointer}
    .composer{position:fixed;right:18px;bottom:18px;width:380px;max-width:94vw;max-height:78vh;display:flex;flex-direction:column;z-index:1000;resize:both;overflow:hidden;border-radius:16px;box-shadow:var(--shadow);background:var(--card)}
    .card-hd{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;background:var(--card);border-bottom:1px solid var(--line)}
    .card-bd{padding:12px;display:flex;flex-direction:column;gap:10px;background:var(--card);flex:1;min-height:0}
    .textarea{width:100%;flex:1;min-height:120px;resize:none;border:1px solid var(--line);border-radius:12px;padding:12px;background:var(--card2);font-size:15px;color:var(--text)}
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,0.4);z-index:999;display:none;opacity:0;transition:opacity .2s}
    mark{background:#fff59d;color:#000}
    .muted{color:var(--muted)}
    .modal-overlay { position: fixed; inset: 0; z-index: 2000; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; opacity: 0; pointer-events: none; transition: opacity .2s; }
    .modal-overlay.open { opacity: 1; pointer-events: auto; }
    .modal-dialog { background: var(--card); border-radius: 16px; padding: 16px; width: 90vw; max-width: 500px; box-shadow: var(--shadow); transform: scale(0.95); transition: transform .2s; }
    .modal-overlay.open .modal-dialog { transform: scale(1); }
    .modal-dialog h3 { margin: 0 0 12px; font-size: 18px; }
    .modal-dialog .textarea { min-height: 150px; font-size: 16px; }
    .modal-actions { display: flex; gap: 8px; justify-content: flex-end; margin-top: 12px; }
    
    @media (max-width: 768px){
      .item{grid-template-columns:1fr}
      .i-sub{display:none}
      .fab{display:inline-flex}
      .composer{left:0;right:0;bottom:0;width:auto;max-width:none;height:65vh;max-height:85vh;border-top-left-radius:18px;border-top-right-radius:18px;border-bottom-left-radius:0;border-bottom-right-radius:0;resize:none;transform:translateY(100%);transition:transform .25s ease-out}
      .composer.open{transform:translateY(0)}
      .overlay.open{display:block;opacity:1}
      #closeComposer{display:inline-flex !important}
    }

    @media (max-width: 480px) {
      .hdr { flex-direction: column; align-items: flex-start; gap: 12px; }
      .controls { justify-content: space-between; width: 100%; }
      .i-actions { gap: 4px; }
      .i-actions button { padding: 8px 10px; font-size: 13px; min-height: 40px; }
      .date-picker-controls { flex-direction: column; align-items: stretch; gap: 10px; width: 100%; }
      .date-picker-controls .kv { display: flex; justify-content: space-between; align-items: center; gap: 8px; }
      .date-picker-controls input { flex-grow: 1; min-width: 120px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="hdr">
      <h1>Preset ‡∏ï‡∏≠‡∏ö‡πÅ‡∏ä‡∏ó V2.4</h1>
      <div class="controls">
        <button class="theme-toggle" id="theme-toggle" aria-label="‡∏™‡∏•‡∏±‡∏ö‡∏ò‡∏µ‡∏°">‚òÄÔ∏è</button>
        <button class="reset-btn" id="reset-btn" title="‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
        <div class="seg" role="group" aria-label="‡∏†‡∏≤‡∏©‡∏≤" id="lang-seg">
          <button id="lang-th" aria-pressed="true">TH</button>
          <button id="lang-en" aria-pressed="false">EN</button>
        </div>
        <div class="seg" role="group" aria-label="‡∏™‡∏£‡∏£‡∏û‡∏ô‡∏≤‡∏°‡∏•‡∏á‡∏ó‡πâ‡∏≤‡∏¢" id="tone-seg">
          <button id="tone-ka" aria-pressed="false">‡∏Ñ‡πà‡∏∞/‡∏ô‡∏∞‡∏Ñ‡∏∞</button>
          <button id="tone-krub" aria-pressed="true">‡∏Ñ‡∏£‡∏±‡∏ö/‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö</button>
        </div>
      </div>
    </div>
    <div class="toolbar">
      <div class="row">
        <label class="field" style="flex:1">üîé <input id="q" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ / Search: /avail, ‡∏£‡∏≤‡∏Ñ‡∏≤, cancel‚Ä¶" /></label>
      </div>
    </div>
    <div id="list" class="list"></div>
  </div>
  <div id="overlay" class="overlay"></div>
  <button id="fab" class="fab" aria-label="‡πÄ‡∏õ‡∏¥‡∏î‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡∏£‡πà‡∏≤‡∏á">‚úé</button>
  <div id="composer" class="composer" role="dialog" aria-label="‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡∏£‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö">
    <div class="card-hd">
      <div class="title">üìù ‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡∏£‡πà‡∏≤‡∏á</div>
      <div class="row right">
        <button id="copyAll" class="primary">üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
        <button id="clearAll">‡∏•‡πâ‡∏≤‡∏á</button>
        <button id="closeComposer" style="display:none;min-height:auto;padding:4px 8px;font-size:18px;border-radius:8px">‚úï</button>
      </div>
    </div>
    <div class="card-bd">
      <textarea id="draft" class="textarea" placeholder="‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏∞‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà ‚Äî ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏Å‡πâ/‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ"></textarea>
      <div style="display:flex;justify-content:space-between;color:var(--muted);font-size:13px">
        <span id="charCount">0 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£</span>
        <em>‡∏•‡∏≤‡∏Å‡∏Ç‡∏≠‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏î‡πâ</em>
      </div>
    </div>
  </div>
  <div id="edit-modal" class="modal-overlay">
    <div class="modal-dialog">
      <h3 id="edit-modal-title">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</h3>
      <textarea id="edit-modal-textarea" class="textarea"></textarea>
      <div class="modal-actions">
        <button id="edit-modal-cancel">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        <button id="edit-modal-save" class="primary">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
      </div>
    </div>
  </div>

  <script>
  (function() {
    // ---------- DOM ELEMENTS ----------
    const $ = sel => document.querySelector(sel);
    const $list = $('#list'), $q = $('#q');
    const $draft = $('#draft'), $copyAll=$('#copyAll'), $clearAll=$('#clearAll'), $charCount=$('#charCount');
    const $toneSeg = $('#tone-seg'), $toneKa=$('#tone-ka'), $toneKrub=$('#tone-krub');
    const $langTh=$('#lang-th'), $langEn=$('#lang-en');
    const $themeToggle = $('#theme-toggle'), $resetBtn = $('#reset-btn');
    const $composer=$('#composer'), $fab=$('#fab'), $overlay=$('#overlay'), $closeComposer=$('#closeComposer');
    const $editModal = $('#edit-modal'), $editModalTitle = $('#edit-modal-title');
    const $editModalTextarea = $('#edit-modal-textarea'), $editModalCancel = $('#edit-modal-cancel'), $editModalSave = $('#edit-modal-save');
    
    let state = { tone: 'krub', lang: 'th', presets: [], editingPresetId: null };

    // ---------- DATA MANAGEMENT ----------
    const DEFAULT_PRESETS_DATA = {
      'msg-avail': { th: '‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏´‡πâ‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡∏Ñ‡πà‡∏∞ ‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡πÅ‡∏à‡πâ‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‚Äì‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ï‡πå ‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÉ‡∏´‡πâ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏∞‡∏Ñ‡∏∞', en: 'We currently have availability. Please share your check-in/check-out dates and number of guests, and we‚Äôll confirm for you.' },
      'msg-no-avail': { th: '‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢‡∏Ñ‡πà‡∏∞ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏ï‡πá‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞‡∏Ñ‡∏∞', en: 'Sorry, the requested dates are fully booked.' },
      'msg-price-house': { th: `‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô ‚Äî ‡∏®‡∏∏‡∏Å‡∏£‡πå‚Äì‡πÄ‡∏™‡∏≤‡∏£‡πå 4,500 ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏∑‡∏ô, ‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå‚Äì‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ 4,000 ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏∑‡∏ô (‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏ä‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏Ñ‡∏£‡∏±‡∏ß)\n‚Ä¢ 3 ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô (‡πÅ‡∏≠‡∏£‡πå) | 2 ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥ | 4 ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡∏Ñ‡∏¥‡∏á‡∏™‡πå‡πÑ‡∏ã‡∏™‡πå ‚Äî ‡∏û‡∏±‡∏Å‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô 8 ‡∏ó‡πà‡∏≤‡∏ô\n‚Ä¢ ‡∏ä‡∏∏‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏ú‡πâ‡∏≤‡∏Ç‡∏ô‡∏´‡∏ô‡∏π‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 8 ‡∏ó‡πà‡∏≤‡∏ô\n‚Ä¢ ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏° (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏à‡∏≥‡∏Å‡∏±‡∏î) 300 ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏∑‡∏ô\n‚Ä¢ ‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏á‡∏ä‡∏°‡∏ß‡∏¥‡∏ß‡πÅ‡∏•‡∏∞‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏•‡∏≤‡∏á ‚Ä¢ ‡∏ü‡∏£‡∏µ‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô 2 ‡∏Ñ‡∏±‡∏ô\n‚Ä¢ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏ó‡∏≤‡∏ô‡πÑ‡∏î‡πâ (‡∏°‡∏µ‡∏à‡∏≤‡∏ô‚Äì‡∏ä‡∏≤‡∏°‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 8 ‡∏ó‡πà‡∏≤‡∏ô)\n‚Ä¢ ‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏î‡∏£‡∏ñ 2 ‡∏Ñ‡∏±‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å\nüìç ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà: https://maps.app.goo.gl/Hx1n1DxjSvUoYnWC8`, en: `Baan Jerkan ‚Äî Fri‚ÄìSat 4,500 THB/night, Sun‚ÄìThu 4,000 THB/night (all-in price; no breakfast or kitchen service)\n‚Ä¢ 3 bedrooms (A/C) | 2 bathrooms | 4 king-size beds ‚Äî standard 8 guests\n‚Ä¢ Bed linen and towels for 8 guests\n‚Ä¢ Extra bed (limited) 300 THB/night\n‚Ä¢ View balcony and shared area ‚Ä¢ 2 bicycles free\n‚Ä¢ Guests may bring food (plates and bowls for 8 provided)\n‚Ä¢ Parking for 2 cars inside\nüìç Map: https://maps.app.goo.gl/Hx1n1DxjSvUoYnWC8` },
      'msg-price-inn1': { th: `‡∏•‡∏≠‡∏™‡∏≠‡∏¥‡∏ô‡∏ô‡πå‡∏ô‡∏Ñ‡∏£ ‡∏ä‡∏±‡πâ‡∏ô 1 (Family Room) ‚Äî 2,000 ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏∑‡∏ô (‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏ä‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏Ñ‡∏£‡∏±‡∏ß)\n‚Ä¢ ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏ä‡∏±‡πâ‡∏ô 1 ‡∏ó‡∏±‡πâ‡∏á‡∏ä‡∏±‡πâ‡∏ô | 1 ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß (‡πÅ‡∏≠‡∏£‡πå)\n‚Ä¢ 3 ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡∏Ñ‡∏¥‡∏á‡∏™‡πå‡πÑ‡∏ã‡∏™‡πå ‚Äî ‡∏û‡∏±‡∏Å‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô 6 ‡∏ó‡πà‡∏≤‡∏ô\n‚Ä¢ 1 ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥\n‚Ä¢ ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏≤‡∏ô‡πå‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏Ñ‡∏£‡∏±‡∏ß‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å\n‚Ä¢ ‡∏ä‡∏∏‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏ú‡πâ‡∏≤‡∏Ç‡∏ô‡∏´‡∏ô‡∏π‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 6 ‡∏ó‡πà‡∏≤‡∏ô\n‚Ä¢ ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏° (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏à‡∏≥‡∏Å‡∏±‡∏î) 300 ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏∑‡∏ô\n‚Ä¢ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏ó‡∏≤‡∏ô‡πÑ‡∏î‡πâ (‡∏°‡∏µ‡∏à‡∏≤‡∏ô‚Äì‡∏ä‡∏≤‡∏°‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 6 ‡∏ó‡πà‡∏≤‡∏ô)\n‚Ä¢ ‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏î‡∏£‡∏ñ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô (‡∏à‡∏≠‡∏î‡πÑ‡∏î‡πâ 2 ‡∏Ñ‡∏±‡∏ô)\nüìç ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà: https://maps.app.goo.gl/qUUuyqxfyezGRVmG6`, en: `Los Inn Nakhon ‚Äî Floor 1 (Family Room) ‚Äî 2,000 THB/night (all-in; no breakfast or kitchen service)\n‚Ä¢ Entire 1st floor | 1 family bedroom (A/C)\n‚Ä¢ 3 king-size beds ‚Äî standard 6 guests\n‚Ä¢ 1 bathroom\n‚Ä¢ Shared area and small pantry\n‚Ä¢ Bed linen and towels for 6 guests\n‚Ä¢ Extra bed (limited) 300 THB/night\n‚Ä¢ Guests may bring food (plates and bowls for 6 provided)\n‚Ä¢ On-site parking (2 cars)\nüìç Map: https://maps.app.goo.gl/qUUuyqxfyezGRVmG6` },
      'msg-price-inn2': { th: `‡∏•‡∏≠‡∏™‡∏≠‡∏¥‡∏ô‡∏ô‡πå‡∏ô‡∏Ñ‡∏£ ‡∏ä‡∏±‡πâ‡∏ô 2 (Two-Bedroom) ‚Äî 2,500 ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏∑‡∏ô (‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏ä‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏Ñ‡∏£‡∏±‡∏ß)\n‚Ä¢ ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏ä‡∏±‡πâ‡∏ô 2 ‡∏ó‡∏±‡πâ‡∏á‡∏ä‡∏±‡πâ‡∏ô\n‚Ä¢ 2 ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô (‡∏£‡∏ß‡∏° 4 ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡∏Ñ‡∏¥‡∏á‡∏™‡πå‡πÑ‡∏ã‡∏™‡πå) ‚Äî ‡∏û‡∏±‡∏Å‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô 8 ‡∏ó‡πà‡∏≤‡∏ô\n  ‚Äì ‡∏´‡πâ‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß: 3 ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡∏Ñ‡∏¥‡∏á‡∏™‡πå‡πÑ‡∏ã‡∏™‡πå\n  ‚Äì ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß: 1 ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡∏Ñ‡∏¥‡∏á‡∏™‡πå‡πÑ‡∏ã‡∏™‡πå\n‚Ä¢ 3 ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥\n‚Ä¢ ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß ‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏≤‡∏ô‡πå‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏Ñ‡∏£‡∏±‡∏ß‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å\n‚Ä¢ ‡∏ä‡∏∏‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏ú‡πâ‡∏≤‡∏Ç‡∏ô‡∏´‡∏ô‡∏π‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 8 ‡∏ó‡πà‡∏≤‡∏ô\n‚Ä¢ ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏° (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏à‡∏≥‡∏Å‡∏±‡∏î) 300 ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏∑‡∏ô\n‚Ä¢ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏ó‡∏≤‡∏ô‡πÑ‡∏î‡πâ (‡∏°‡∏µ‡∏à‡∏≤‡∏ô‚Äì‡∏ä‡∏≤‡∏°‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 8 ‡∏ó‡πà‡∏≤‡∏ô)\n‚Ä¢ ‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏î‡∏£‡∏ñ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô (‡∏à‡∏≠‡∏î‡πÑ‡∏î‡πâ 2 ‡∏Ñ‡∏±‡∏ô)\n‚Ä¢ ‡∏Ç‡∏∂‡πâ‡∏ô‡∏•‡∏á‡∏ó‡∏≤‡∏á‡∏ö‡∏±‡∏ô‡πÑ‡∏î\nüìç ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà: https://maps.app.goo.gl/qUUuyqxfyezGRVmG6`, en: `Los Inn Nakhon ‚Äî Floor 2 (Two-Bedroom) ‚Äî 2,500 THB/night (all-in; no breakfast or kitchen service)\n‚Ä¢ Entire 2nd floor\n‚Ä¢ 2 bedrooms (total 4 king-size beds) ‚Äî standard 8 guests\n  ‚Äì Family room: 3 king-size beds\n  ‚Äì Single bedroom: 1 king-size bed\n‚Ä¢ 3 bathrooms\n‚Ä¢ Family-room living area and small pantry\n‚Ä¢ Bed linen and towels for 8 guests\n‚Ä¢ Extra bed (limited) 300 THB/night\n‚Ä¢ Guests may bring food (plates and bowls for 8 provided)\n‚Ä¢ On-site parking (2 cars)\n‚Ä¢ Stairs only\nüìç Map: https://maps.app.goo.gl/qUUuyqxfyezGRVmG6` },
      'msg-price-inn3': { th: `‡∏•‡∏≠‡∏™‡∏≠‡∏¥‡∏ô‡∏ô‡πå‡∏ô‡∏Ñ‡∏£ ‡∏ä‡∏±‡πâ‡∏ô 3 (Two-Bedroom) ‚Äî 2,500 ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏∑‡∏ô (‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏ä‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏Ñ‡∏£‡∏±‡∏ß)\n‚Ä¢ ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏ä‡∏±‡πâ‡∏ô 3 ‡∏ó‡∏±‡πâ‡∏á‡∏ä‡∏±‡πâ‡∏ô\n‚Ä¢ 2 ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô (‡∏£‡∏ß‡∏° 4 ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡∏Ñ‡∏¥‡∏á‡∏™‡πå‡πÑ‡∏ã‡∏™‡πå) ‚Äî ‡∏û‡∏±‡∏Å‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô 8 ‡∏ó‡πà‡∏≤‡∏ô\n  ‚Äì ‡∏´‡πâ‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß: 3 ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡∏Ñ‡∏¥‡∏á‡∏™‡πå‡πÑ‡∏ã‡∏™‡πå\n  ‚Äì ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß: 1 ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡∏Ñ‡∏¥‡∏á‡∏™‡πå‡πÑ‡∏ã‡∏™‡πå\n‚Ä¢ 3 ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥\n‚Ä¢ ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß ‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏≤‡∏ô‡πå‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏Ñ‡∏£‡∏±‡∏ß‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å\n‚Ä¢ ‡∏ä‡∏∏‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏ú‡πâ‡∏≤‡∏Ç‡∏ô‡∏´‡∏ô‡∏π‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 8 ‡∏ó‡πà‡∏≤‡∏ô\n‚Ä¢ ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏° (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏à‡∏≥‡∏Å‡∏±‡∏î) 300 ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏∑‡∏ô\n‚Ä¢ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏ó‡∏≤‡∏ô‡πÑ‡∏î‡πâ (‡∏°‡∏µ‡∏à‡∏≤‡∏ô‚Äì‡∏ä‡∏≤‡∏°‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 8 ‡∏ó‡πà‡∏≤‡∏ô)\n‚Ä¢ ‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏î‡∏£‡∏ñ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô (‡∏à‡∏≠‡∏î‡πÑ‡∏î‡πâ 2 ‡∏Ñ‡∏±‡∏ô)\n‚Ä¢ ‡∏Ç‡∏∂‡πâ‡∏ô‡∏•‡∏á‡∏ó‡∏≤‡∏á‡∏ö‡∏±‡∏ô‡πÑ‡∏î‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏ó‡∏µ‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏±‡∏ô‡πÑ‡∏î‡∏•‡∏≥‡∏ö‡∏≤‡∏Å)\nüìç ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà: https://maps.app.goo.gl/qUUuyqxfyezGRVmG6`, en: `Los Inn Nakhon ‚Äî Floor 3 (Two-Bedroom) ‚Äî 2,500 THB/night (all-in; no breakfast or kitchen service)\n‚Ä¢ Entire 3rd floor\n‚Ä¢ 2 bedrooms (total 4 king-size beds) ‚Äî standard 8 guests\n  ‚Äì Family room: 3 king-size beds\n  ‚Äì Single bedroom: 1 king-size bed\n‚Ä¢ 3 bathrooms\n‚Ä¢ Family-room living area and small pantry\n‚Ä¢ Bed linen and towels for 8 guests\n‚Ä¢ Extra bed (limited) 300 THB/night\n‚Ä¢ Guests may bring food (plates and bowls for 8 provided)\n‚Ä¢ On-site parking (2 cars)\n‚Ä¢ Stairs only (may not suit guests with mobility issues)\nüìç Map: https://maps.app.goo.gl/qUUuyqxfyezGRVmG6` },
      'msg-paid': { th: `‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡πÇ‡∏≠‡∏ô‡∏°‡∏±‡∏î‡∏à‡∏≥ 50% ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á ‡∏´‡∏•‡∏±‡∏á‡πÇ‡∏≠‡∏ô‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡∏™‡πà‡∏á‡∏™‡∏•‡∏¥‡∏õ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏à‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£ ‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å‡∏Ñ‡πà‡∏∞\n‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£: ‡∏ó‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢‡∏ò‡∏ô‡∏ä‡∏≤‡∏ï (TTB)\n‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: 321-2-76785-3\n‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: ‡∏ö‡∏à‡∏Å.‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô (BAANJERKAN)`, en: `You can pay in full or transfer a 50% deposit to confirm your booking. After payment, please send the slip together with the booker‚Äôs full name, phone number, and number of guests.\nBank: TTB (TMBThanachart Bank)\nAccount No.: 321-2-76785-3\nAccount Name: BAANJERKAN Co., Ltd.` },
      'msg-checkin-house': { th: `‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô 14:00‚Äì24:00 ‡∏ô.\n‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ó‡πå ‡∏Å‡πà‡∏≠‡∏ô 12:00 ‡∏ô.\n\n‡∏Å‡πà‡∏≠‡∏ô‡∏ñ‡∏∂‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 30 ‡∏ô‡∏≤‡∏ó‡∏µ ‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡πÇ‡∏ó‡∏£‡πÅ‡∏à‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏ö‡∏≠‡∏£‡πå\n097-2161112 ‡∏´‡∏£‡∏∑‡∏≠ 095-5153834\n(‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏±‡∏ö)`, en: `Check-in 14:00‚Äì24:00\nCheck-out before 12:00\n\nPlease call 30 minutes before arrival at\n097-2161112 or 095-5153834\n(so we can deliver the keys)` },
      'msg-checkin-inn': { th: `‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô 14:00‚Äì21:00 ‡∏ô.\n‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ó‡πå ‡∏Å‡πà‡∏≠‡∏ô 12:00 ‡∏ô.\n\n> ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏≤‡∏ô‡πå‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÅ‡∏Ñ‡∏ä‡πÄ‡∏ä‡∏µ‡∏¢‡∏£‡πå "‡∏£‡πâ‡∏≤‡∏ô ‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô‡∏Ñ‡∏£‡∏≤‡∏ü‡∏ó‡πå" (‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏ù‡∏≤‡∏Å‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å ‡∏ä‡∏±‡πâ‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î)\n> ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ 097-2161112 , 095-5153834`, en: `Check-in 14:00‚Äì21:00\nCheck-out before 12:00\n\n> Get keys at the cashier counter ‚ÄúJerkan Craft‚Äù (souvenir shop on the ground floor)\n> Contact 097-2161112, 095-5153834` },
      'msg-map': { th: `‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô: https://maps.app.goo.gl/Hx1n1DxjSvUoYnWC8\n‡∏•‡∏≠‡∏™‡∏≠‡∏¥‡∏ô‡∏ô‡πå‡∏ô‡∏Ñ‡∏£: https://maps.app.goo.gl/qUUuyqxfyezGRVmG6`, en: `Baan Jerkan: https://maps.app.goo.gl/Hx1n1DxjSvUoYnWC8\nLos Inn Nakhon: https://maps.app.goo.gl/qUUuyqxfyezGRVmG6` },
      'msg-extra-bed': { th: '‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏° (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏à‡∏≥‡∏Å‡∏±‡∏î) 300 ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏∑‡∏ô', en: 'Extra bed (limited) 300 THB/night' },
      'msg-pet': { th: `‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡∏Ç‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πà‡∏ß‡∏°‡∏°‡∏∑‡∏≠ ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ô‡∏≥‡∏™‡∏∏‡∏ô‡∏±‡∏Ç‡πÄ‡∏Ç‡πâ‡∏≤‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô\n‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡πà‡∏≤‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö üôè\n\n‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏Å‡∏≤‡∏£‡∏ù‡πà‡∏≤‡∏ù‡∏∑‡∏ô ‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö 1,000 ‡∏ö‡∏≤‡∏ó\n‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏î‡πÄ‡∏ä‡∏¢‡∏Ñ‡πà‡∏≤‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡πÅ‡∏•‡∏∞‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡πÉ‡∏´‡πâ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö\n\n‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏û‡∏µ‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏°‡∏≤‡∏Å ‡πÜ ‡∏Ñ‡∏£‡∏±‡∏ö‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πà‡∏ß‡∏°‡∏°‡∏∑‡∏≠‡∏Ñ‡∏£‡∏±‡∏ö`, en: `Pet policy: Please keep dogs out of the bedrooms to maintain cleanliness and comfort for the next guests. üôè\nIf we detect a violation, a 1,000 THB cleaning fee will apply.\nThank you very much for your cooperation.` },
      'msg-cancel': { th: '‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å: ‡πÅ‡∏à‡πâ‡∏á‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡πà‡∏≠‡∏ô‡∏ß‡∏±‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å 14 ‡∏ß‡∏±‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ ‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô / ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 14 ‡∏ß‡∏±‡∏ô ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ', en: 'Cancellation policy: Cancel at least 14 days before check-in for a full refund. Less than 14 days is non-refundable.' }
    };
    
    const SECTION_DEFINITIONS = {
      1: { th: '1. ‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡∏´‡πâ‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á', en: '1. Availability Inquiry' },
      2: { th: '2. ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î', en: '2. Price & Details' },
      3: { th: '3. ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô', en: '3. Payment' },
      4: { th: '4. ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô', en: '4. Booking & Check-in' },
      5: { th: '5. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏™‡∏£‡∏¥‡∏°', en: '5. Additional Info' },
      6: { th: '6. ‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢', en: '6. Policies' }
    };

    const PRESET_STRUCTURE = [
      { id:'avail', sectionId: 1, order: 1, titleTH:'‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö: ‡∏°‡∏µ‡∏´‡πâ‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á', titleEN:'Reply: Available', tplId:'msg-avail' },
      { id:'no-avail', sectionId: 1, order: 2, titleTH:'‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö: ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏ï‡πá‡∏°', titleEN:'Reply: Not Available', tplId:'msg-no-avail' },
      
      { id:'price-house', sectionId: 2, order: 1, titleTH:'‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô', titleEN:'Baan Jerkan', tplId:'msg-price-house', prop:'house', propLabelTH:'‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô', propLabelEN:'Baan Jerkan' },
      { id:'price-inn1', sectionId: 2, order: 2, titleTH:'‡∏•‡∏≠‡∏™‡∏≠‡∏¥‡∏ô‡∏ô‡πå‡∏ô‡∏Ñ‡∏£ ‡∏ä‡∏±‡πâ‡∏ô 1', titleEN:'Los Inn Nakhon Fl. 1', tplId:'msg-price-inn1', prop:'inn', propLabelTH:'‡∏•‡∏≠‡∏™‡∏≠‡∏¥‡∏ô‡∏ô‡πå‡∏ô‡∏Ñ‡∏£', propLabelEN:'Los Inn Nakhon' },
      { id:'price-inn2', sectionId: 2, order: 3, titleTH:'‡∏•‡∏≠‡∏™‡∏≠‡∏¥‡∏ô‡∏ô‡πå‡∏ô‡∏Ñ‡∏£ ‡∏ä‡∏±‡πâ‡∏ô 2', titleEN:'Los Inn Nakhon Fl. 2', tplId:'msg-price-inn2', prop:'inn', propLabelTH:'‡∏•‡∏≠‡∏™‡∏≠‡∏¥‡∏ô‡∏ô‡πå‡∏ô‡∏Ñ‡∏£', propLabelEN:'Los Inn Nakhon' },
      { id:'price-inn3', sectionId: 2, order: 4, titleTH:'‡∏•‡∏≠‡∏™‡∏≠‡∏¥‡∏ô‡∏ô‡πå‡∏ô‡∏Ñ‡∏£ ‡∏ä‡∏±‡πâ‡∏ô 3', titleEN:'Los Inn Nakhon Fl. 3', tplId:'msg-price-inn3', prop:'inn', propLabelTH:'‡∏•‡∏≠‡∏™‡∏≠‡∏¥‡∏ô‡∏ô‡πå‡∏ô‡∏Ñ‡∏£', propLabelEN:'Los Inn Nakhon' },

      { id:'paid', sectionId: 3, order: 1, titleTH:'‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô/‡∏°‡∏±‡∏î‡∏à‡∏≥', titleEN:'Payment/Deposit Method', tplId:'msg-paid' },

      { id:'confirm-book', sectionId: 4, order: 1, titleTH:'‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á', titleEN:'Generate Booking Confirmation', tplId:null, type:'confirm' },
      { id:'checkin-house', sectionId: 4, order: 2, titleTH:'‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô (‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô)', titleEN:'Check-in Details (Baan Jerkan)', tplId:'msg-checkin-house', prop:'house', propLabelTH:'‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô', propLabelEN:'Baan Jerkan' },
      { id:'checkin-inn', sectionId: 4, order: 3, titleTH:'‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô (‡∏•‡∏≠‡∏™‡∏≠‡∏¥‡∏ô‡∏ô‡πå‡∏ô‡∏Ñ‡∏£)', titleEN:'Check-in Details (Los Inn)', tplId:'msg-checkin-inn', prop:'inn', propLabelTH:'‡∏•‡∏≠‡∏™‡∏≠‡∏¥‡∏ô‡∏ô‡πå‡∏ô‡∏Ñ‡∏£', propLabelEN:'Los Inn Nakhon' },
      
      { id:'map', sectionId: 5, order: 1, titleTH:'‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà', titleEN:'Map', tplId:'msg-map' },
      { id:'extra-bed', sectionId: 5, order: 2, titleTH:'‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏°', titleEN:'Extra Bed', tplId:'msg-extra-bed' },

      { id:'pet', sectionId: 6, order: 1, titleTH:'‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á', titleEN:'Pet Policy', tplId:'msg-pet' },
      { id:'cancel', sectionId: 6, order: 2, titleTH:'‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å', titleEN:'Cancellation Policy', tplId:'msg-cancel' },
    ];

    function loadPresets() {
      try {
        const savedPresets = localStorage.getItem('userPresets');
        if (savedPresets) { return JSON.parse(savedPresets); }
      } catch (e) { console.error("Failed to parse presets from localStorage", e); }
      return DEFAULT_PRESETS_DATA;
    }
    function savePresets(presets) { localStorage.setItem('userPresets', JSON.stringify(presets)); }

    // ---------- UTILITIES ----------
    const toast = document.createElement('div'); toast.className='toast'; document.body.appendChild(toast);
    function setToast(msg='‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‚úì'){ toast.textContent=msg; toast.classList.add('show'); setTimeout(()=> toast.classList.remove('show'), 1300); }
    function getPresetText(tplId) {
        if (!tplId || !state.presets[tplId]) return '';
        return state.presets[tplId][state.lang] || state.presets[tplId]['th'] || '';
    }
    function toneAdjust(text){
      if(state.lang ==='th' && state.tone ==='krub'){ return text.replace(/‡∏ô‡∏∞‡∏Ñ‡∏∞/g,'‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö').replace(/‡∏Ñ‡πà‡∏∞/g,'‡∏Ñ‡∏£‡∏±‡∏ö').replace(/(^|[^‡∏Å-‡πô])‡∏Ñ‡∏∞/g,'$1‡∏Ñ‡∏£‡∏±‡∏ö'); }
      return text;
    }
    function escapeRegExp(str){ return str.replace(/[.*+?^${}()|[\]\\]/g,'\\$&'); }
    function highlight(text, q){ if(!q) return text; try{ const re = new RegExp(escapeRegExp(q), 'gi'); return text.replace(re, m => '<mark>'+m+'</mark>'); } catch(e){ return text; } }
    function copyText(txt){
      if(navigator.clipboard && window.isSecureContext){
        navigator.clipboard.writeText(txt)
          .then(()=> setToast(state.lang==='th'?'‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‚úì':'Copied ‚úì'))
          .catch(()=> fallback(txt));
      } else { fallback(txt); }
      function fallback(t){
        const ta = document.createElement('textarea'); ta.value = t;
        ta.style.position = 'fixed'; ta.style.top = 0; ta.style.left = 0; ta.style.opacity = '0';
        document.body.appendChild(ta); ta.select();
        try { document.execCommand('copy'); setToast(state.lang==='th'?'‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‚úì':'Copied ‚úì'); } 
        catch (err) { console.error('Fallback: Oops, unable to copy', err); setToast(state.lang==='th'?'‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î':'Copy failed'); }
        document.body.removeChild(ta);
      }
    }
    function updateCount(){ $charCount.textContent = (state.lang==='th'?'‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£':'chars') + ': ' + (($draft.value||'').length); }
    function fmtDDMMYY(d){ const dt=new Date(d); if(isNaN(dt)) return ''; const dd=('0'+dt.getDate()).slice(-2); const mm=('0'+(dt.getMonth()+1)).slice(-2); const yy=(dt.getFullYear()+'').slice(-2); return `${dd}/${mm}/${yy}`; }

    // ---------- RENDER FUNCTIONS ----------
    function renderList(){
      const q = ($q.value||'').trim().toLowerCase();
      const items = PRESET_STRUCTURE.filter(p => {
        const title = state.lang === 'th' ? p.titleTH : p.titleEN;
        const content = p.tplId ? getPresetText(p.tplId) : '';
        return !q || title.toLowerCase().includes(q) || content.toLowerCase().includes(q);
      }).sort((a, b) => {
        if (a.sectionId !== b.sectionId) return a.sectionId - b.sectionId;
        return a.order - b.order;
      });
      
      let html = '', currentSectionId = null;
      items.forEach(p => {
        if(p.sectionId !== currentSectionId) {
          currentSectionId = p.sectionId;
          const section = SECTION_DEFINITIONS[currentSectionId];
          const sectionName = state.lang === 'th' ? section.th : section.en;
          html += `<div class="section"><span class="dot"></span><div>${sectionName}</div></div>`;
        }
        html += (p.type === 'confirm') ? itemRowConfirm(p) : rowTextHTML(p, q);
      });
      $list.innerHTML = html || `<div class="muted" style="padding:8px 2px">${state.lang==='th'?'‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤':'No results'}</div>`;
      initConfirmRows();
    }
    function rowTextHTML(p, q){
      const text = getPresetText(p.tplId);
      const title = state.lang === 'th' ? p.titleTH : p.titleEN;
      return `<div class="item ${p.prop || ''}" data-id="${p.id}">
        <div class="i-main">
          ${p.prop ? `<div class="i-badge"><span class="badge ${p.prop}"><span class="dot"></span>${state.lang === 'th' ? p.propLabelTH : p.propLabelEN}</span></div>` : ''}
          <div class="i-title">${title}</div>
          <div class="i-sub">/${p.id}</div>
          <div class="preview"><pre><code>${highlight(text, q)}</code></pre></div>
        </div>
        <div class="i-actions">
          <button data-act="edit" data-tplid="${p.tplId}" title="‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç">‚úèÔ∏è</button>
          <button class="primary" data-act="copy" data-tplid="${p.tplId}">üìã ${state.lang==='th'?'‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å':'Copy'}</button>
          <button data-act="add" data-tplid="${p.tplId}">‚ûï ${state.lang==='th'?'‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏£‡πà‡∏≤‡∏á':'Add'}</button>
        </div>
      </div>`;
    }
    function itemRowConfirm(p){
      const title = state.lang==='th' ? p.titleTH : p.titleEN;
      return `<div class="item ${p.prop||''}" data-id="${p.id}" data-type="confirm">
        <div class="i-main">
          <div class="i-title">${title}</div>
          <div class="i-sub">${state.lang==='th'?'‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô':'Fill details to generate confirmation'}</div>
          <div class="date-picker-controls" style="display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin:6px 0 4px">
            <label class="kv"><span>${state.lang==='th'?'‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô':'Check‚Äëin'}</span><input type="date" class="ci" /></label>
            <label class="kv"><span>${state.lang==='th'?'‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏∑‡∏ô':'Nights'}</span><input type="number" class="nights" style="width: 70px;" value="1" min="1" /></label>
            <label class="kv"><span>${state.lang==='th'?'‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ó‡πå':'Check‚Äëout'}</span><input type="date" class="co" /></label>
          </div>
          <div class="preview expanded"><pre><code class="cp">${state.lang==='th'?'‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà...':'Pick dates...'}</code></pre></div>
        </div>
        <div class="i-actions">
          <button class="primary" data-act="copy">üìã ${state.lang==='th'?'‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å':'Copy'}</button>
          <button data-act="add">‚ûï ${state.lang==='th'?'‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏£‡πà‡∏≤‡∏á':'Add'}</button>
        </div>
      </div>`;
    }
    function calcNights(ci,co){ const a=new Date(ci), b=new Date(co); if(isNaN(a)||isNaN(b)) return 0; return Math.round((b-a)/86400000); }
    function buildConfirmMessage(ci,co){
      const n=calcNights(ci,co); if(n<1) return '';
      const ciFormatted = fmtDDMMYY(ci);
      const coFormatted = fmtDDMMYY(co);
      if(state.lang==='th'){ return `‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô ${ciFormatted} ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ó‡πå ${coFormatted} ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ${n} ‡∏Ñ‡∏∑‡∏ô\n‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡∏Ç‡∏≠ ‡∏ä‡∏∑‡πà‡∏≠‚Äì‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• ‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á ‡πÅ‡∏•‡∏∞‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏Ñ‡∏£‡∏±‡∏ö`; }
      else { return `Booking confirmation: Check‚Äëin ${ciFormatted} ‚Ä¢ Check‚Äëout ${coFormatted} ‚Ä¢ ${n} night(s)\nPlease share the booker‚Äôs full name and phone number.`; }
    }
    function initConfirmRows(){
      document.querySelectorAll('.item[data-type="confirm"]').forEach(row=>{
        const ci = row.querySelector('.ci'), co = row.querySelector('.co'), nights = row.querySelector('.nights'), cp = row.querySelector('.cp');
        const toISO = d => d.toISOString().slice(0,10);

        function updateMessage() {
          const msg = buildConfirmMessage(ci.value, co.value);
          cp.textContent = msg || (state.lang === 'th' ? '‡πÇ‡∏õ‡∏£‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏Ñ‡∏∑‡∏ô)' : 'Please pick valid dates (at least 1 night)');
        }

        function onCiOrNightsChange() {
          const checkinDate = new Date(ci.value);
          const numNights = parseInt(nights.value, 10);
          if (!isNaN(checkinDate.getTime()) && numNights > 0) {
            const checkoutDate = new Date(checkinDate.getTime());
            checkoutDate.setDate(checkoutDate.getDate() + numNights);
            co.value = toISO(checkoutDate);
          }
          updateMessage();
        }

        function onCoChange() {
          const numNights = calcNights(ci.value, co.value);
          nights.value = numNights > 0 ? numNights : '';
          updateMessage();
        }

        if (!ci.value) ci.value = toISO(new Date());
        
        ci.addEventListener('change', onCiOrNightsChange);
        nights.addEventListener('input', onCiOrNightsChange);
        co.addEventListener('change', onCoChange);
        
        onCiOrNightsChange();
      });
    }

    // ---------- EVENT HANDLERS ----------
    $list.addEventListener('click', (e)=>{
      const button = e.target.closest('button[data-act]');
      if (button) {
        const act = button.dataset.act;
        const row = button.closest('.item');
        const tplId = button.dataset.tplid;
        if (act === 'edit') {
          state.editingPresetId = tplId;
          $editModalTitle.textContent = `‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° (${state.lang.toUpperCase()})`;
          $editModalTextarea.value = getPresetText(tplId);
          $editModal.classList.add('open');
          $editModalTextarea.focus();
          return;
        }
        let textToProcess = '';
        if (row.dataset.type === 'confirm') {
            const ci = row.querySelector('.ci').value, co = row.querySelector('.co').value;
            textToProcess = buildConfirmMessage(ci, co);
            if (!textToProcess) { setToast(state.lang === 'th' ? '‡πÇ‡∏õ‡∏£‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á' : 'Pick valid dates'); return; }
        } else { textToProcess = getPresetText(tplId); }
        const finalText = toneAdjust(textToProcess);
        if (act === 'copy') { copyText(finalText); }
        if (act === 'add') {
          const cur = $draft.value.trim();
          $draft.value = cur ? `${cur}\n\n${finalText}` : finalText;
          updateCount();
          setToast(state.lang==='th'?'‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏£‡πà‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß':'Added to draft');
        }
        return;
      }
      
      const mainArea = e.target.closest('.i-main');
      if (mainArea) {
        const item = mainArea.closest('.item');
        if (item && item.dataset.type !== 'confirm') {
            item.classList.toggle('expanded');
        }
      }
    });

    $editModalSave.addEventListener('click', () => {
      const newText = $editModalTextarea.value;
      const tplId = state.editingPresetId;
      if (tplId && state.presets[tplId]) {
        state.presets[tplId][state.lang] = newText;
        savePresets(state.presets);
        renderList();
        setToast('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‚úì');
      }
      $editModal.classList.remove('open');
    });
    $editModalCancel.addEventListener('click', () => $editModal.classList.remove('open'));
    $q.addEventListener('input', renderList);
    $draft.addEventListener('input', updateCount);
    $copyAll.addEventListener('click', () => copyText($draft.value||''));
    $clearAll.addEventListener('click', () => { $draft.value=''; updateCount(); });
    function setLang(next) {
      state.lang = next;
      $langTh.setAttribute('aria-pressed', next==='th'); $langEn.setAttribute('aria-pressed', next==='en');
      $toneSeg.style.display = next === 'th' ? 'inline-flex' : 'none';
      localStorage.setItem('appLang', next);
      renderList();
    }
    $langTh.addEventListener('click', () => setLang('th'));
    $langEn.addEventListener('click', () => setLang('en'));
    function setTone(next) {
      state.tone = next;
      $toneKa.setAttribute('aria-pressed', next === 'ka'); $toneKrub.setAttribute('aria-pressed', next === 'krub');
      localStorage.setItem('appTone', next);
    }
    $toneKa.onclick = () => setTone('ka');
    $toneKrub.onclick = () => setTone('krub');
    function setTheme(theme) {
      document.documentElement.setAttribute('data-theme', theme);
      $themeToggle.textContent = theme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
      localStorage.setItem('appTheme', theme);
    }
    $themeToggle.addEventListener('click', () => {
      const current = document.documentElement.getAttribute('data-theme') || 'light';
      setTheme(current === 'dark' ? 'light' : 'dark');
    });
    $resetBtn.addEventListener('click', () => {
        if (confirm(state.lang === 'th' ? '‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô?' : 'Are you sure you want to reset all messages to default?')) {
            localStorage.removeItem('userPresets');
            state.presets = loadPresets();
            renderList();
            setToast('‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏•‡πâ‡∏ß');
        }
    });
    function openComposer() { $composer.classList.add('open'); $overlay.classList.add('open'); }
    function closeComposer() { $composer.classList.remove('open'); $overlay.classList.remove('open'); }
    $fab.addEventListener('click', openComposer);
    $closeComposer.addEventListener('click', closeComposer);
    $overlay.addEventListener('click', closeComposer);

    // ---------- INITIALIZATION ----------
    function initialize() {
      const savedTheme = localStorage.getItem('appTheme') || 'light';
      const savedLang = localStorage.getItem('appLang') || 'th';
      const savedTone = localStorage.getItem('appTone') || 'krub';
      state.presets = loadPresets();
      setTheme(savedTheme);
      setLang(savedLang);
      setTone(savedTone);
      updateCount();
    }
    initialize();
  })();
  </script>
</body>
</html>
