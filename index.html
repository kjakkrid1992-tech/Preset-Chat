<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Preset ‡∏ï‡∏≠‡∏ö‡πÅ‡∏ä‡∏ó V1.6.4 ‚Äî Mobile Fix + Section Headings</title>
  <style>
    :root{--bg:#f7f8fb;--text:#0b1220;--muted:#6b7280;--card:#fff;--card2:#f3f6fb;--line:#e5e9f2;--accent:#2563eb;--accent-2:#1e40af;--shadow:0 8px 24px rgba(18,41,76,.07);--tap:44px}
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font:16px/1.55 Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    .wrap{max-width:920px;margin:10px auto;padding:0 12px}
    .hdr{display:flex;gap:8px;align-items:center;justify-content:space-between;margin-bottom:6px}
    h1{margin:0;font-size:18px;font-weight:700}
    .controls{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    .seg{display:inline-flex;border:1px solid var(--line);background:var(--card);border-radius:999px;overflow:hidden;box-shadow:var(--shadow)}
    .seg button{padding:8px 12px;border:0;background:transparent;color:var(--muted);cursor:pointer;min-height:var(--tap);font-size:14px}
    .seg button[aria-pressed="true"]{background:var(--accent);color:#fff}
    .toolbar{position:sticky;top:0;z-index:5;background:linear-gradient(var(--bg),var(--bg));padding:8px 0 10px}
    .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .field{display:flex;align-items:center;gap:8px;background:var(--card);border:1px solid var(--line);border-radius:14px;padding:10px 14px;box-shadow:var(--shadow);min-width:260px;flex:1}
    .field input{border:0;outline:0;background:transparent;color:var(--text);font-size:16px;min-width:160px}
    .list{display:flex;flex-direction:column;gap:10px}
    .section{display:flex;gap:8px;align-items:center;padding:6px 4px 0;margin-top:6px;font-weight:800}
    .section .dot{width:8px;height:8px;border-radius:50%;background:linear-gradient(180deg,var(--accent),var(--accent-2));opacity:.75}
    .item{display:grid;grid-template-columns:1fr auto;gap:8px;align-items:center;background:var(--card);border:1px solid var(--line);border-radius:14px;padding:10px 12px;box-shadow:var(--shadow)}
    .i-main{min-width:0}
    .i-title{font-weight:700;font-size:15px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
    .i-sub{font:12.5px ui-monospace,Menlo,Consolas,monospace;color:var(--muted)}
    .i-actions{display:flex;gap:8px;flex-wrap:wrap}
    button{cursor:pointer;border:1px solid var(--line);background:#fff;color:#0b1220;padding:10px 12px;border-radius:12px;font-size:14px;min-height:var(--tap)}
    button.primary{background:var(--accent);color:#fff;border-color:var(--accent-2)}
    .preview{display:block;margin-top:8px}
    pre{white-space:pre-wrap;background:var(--card2);border:1px dashed var(--line);border-radius:12px;padding:12px;margin:0;max-height:160px;overflow:auto;font-size:14px}
    .toast{position:fixed;right:12px;bottom:12px;background:#0f172a;color:#cde5ff;border:1px solid #21304d;padding:10px 12px;border-radius:10px;opacity:0;transform:translateY(8px);transition:.2s;z-index:1500;font-size:13px}
    .toast.show{opacity:1;transform:translateY(0)}
    /* Composer (fixed, mobile-friendly) */
    .fab{position:fixed;right:16px;bottom:16px;z-index:1100;display:none;align-items:center;justify-content:center;width:56px;height:56px;border-radius:999px;border:0;background:var(--accent);color:#fff;font-size:22px;box-shadow:0 10px 26px rgba(37,99,235,.35);cursor:pointer}
    .composer{position:fixed;right:18px;bottom:18px;width:380px;max-width:94vw;max-height:78vh;display:flex;flex-direction:column;z-index:1000;resize:both;overflow:hidden;border-radius:16px;box-shadow:var(--shadow);background:var(--card)}
    .card-hd{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;background:var(--card);border-bottom:1px solid var(--line)}
    .card-bd{padding:12px;display:flex;flex-direction:column;gap:10px;background:var(--card);flex:1;min-height:0}
    .textarea{width:100%;flex:1;min-height:120px;resize:none;border:1px solid var(--line);border-radius:12px;padding:12px;background:var(--card2);font-size:15px}
    @media (max-width: 768px){
      .item{grid-template-columns:1fr}
      .i-sub{display:none}
      .fab{display:inline-flex}
      .composer{left:0;right:0;bottom:0;width:auto;max-width:none;height:65vh;max-height:85vh;border-top-left-radius:18px;border-top-right-radius:18px;border-bottom-left-radius:0;border-bottom-right-radius:0;resize:none;transform:translateY(100%);transition:transform .25s ease-out}
      .composer.open{transform:translateY(0)}
    }
    mark{background:#fff59d}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="hdr">
      <h1>Preset ‡∏ï‡∏≠‡∏ö‡πÅ‡∏ä‡∏ó V1.6.4 ‚Äî Mobile Fix + Section Headings</h1>
      <div class="controls">
        <div class="seg" role="group" aria-label="‡∏™‡∏£‡∏£‡∏û‡∏ô‡∏≤‡∏°‡∏•‡∏á‡∏ó‡πâ‡∏≤‡∏¢">
          <button id="tone-ka" aria-pressed="false">‡∏Ñ‡πà‡∏∞/‡∏ô‡∏∞‡∏Ñ‡∏∞</button>
          <button id="tone-krub" aria-pressed="true">‡∏Ñ‡∏£‡∏±‡∏ö/‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö</button>
        </div>
      </div>
    </div>

    <div class="toolbar">
      <div class="row">
        <label class="field" style="flex:1">üîé <input id="q" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤: /avail, ‡∏£‡∏≤‡∏Ñ‡∏≤, ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‚Ä¶" /></label>
      </div>
    </div>

    <div id="list" class="list"></div>
  </div>

  <!-- Composer -->
  <button id="fab" class="fab" aria-label="‡πÄ‡∏õ‡∏¥‡∏î‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡∏£‡πà‡∏≤‡∏á">‚úé</button>
  <div id="composer" class="composer" role="dialog" aria-label="‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡∏£‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö">
    <div class="card-hd">
      <div class="title">üìù ‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡∏£‡πà‡∏≤‡∏á</div>
      <div class="row right">
        <button id="copyAll" class="primary">üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
        <button id="clearAll">‡∏•‡πâ‡∏≤‡∏á</button>
      </div>
    </div>
    <div class="card-bd">
      <textarea id="draft" class="textarea" placeholder="‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏∞‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà ‚Äî ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏Å‡πâ/‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ"></textarea>
      <div style="display:flex;justify-content:space-between;color:var(--muted);font-size:13px">
        <span id="charCount">0 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£</span>
        <em>‡∏•‡∏≤‡∏Å‡∏Ç‡∏≠‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏î‡πâ</em>
      </div>
    </div>
  </div>

  <!-- TEMPLATES -->
  <template id="msg-avail">‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏´‡πâ‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡∏Ñ‡πà‡∏∞ ‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡πÅ‡∏à‡πâ‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‚Äì‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ï‡πå ‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÉ‡∏´‡πâ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏∞‡∏Ñ‡∏∞</template>
  <template id="msg-no-avail">‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢‡∏Ñ‡πà‡∏∞ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏ï‡πá‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞‡∏Ñ‡∏∞</template>
  <template id="msg-price-house">‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô ‚Äî ‡∏®‡∏∏‡∏Å‡∏£‡πå‚Äì‡πÄ‡∏™‡∏≤‡∏£‡πå 4,500 ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏∑‡∏ô, ‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå‚Äì‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ 4,000 ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏∑‡∏ô (‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏ä‡πâ‡∏≤)
‚Ä¢ ‡∏û‡∏±‡∏Å‡πÑ‡∏î‡πâ 8 ‡∏ó‡πà‡∏≤‡∏ô | 4 ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡∏Ñ‡∏¥‡∏á‡∏™‡πå‡πÑ‡∏ã‡∏™‡πå 4 | ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥ 2
‚Ä¢ ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô 14:00‚Äì24:00 | ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ï‡πå 12:00
‚Ä¢ ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏•‡∏≤‡∏á + ‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏á‡∏ä‡∏°‡∏ß‡∏¥‡∏ß | ‡∏ô‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏î‡πâ (‡∏°‡∏µ‡∏à‡∏≤‡∏ô‚Äì‡∏ä‡∏≤‡∏° 8 ‡∏ä‡∏∏‡∏î)
‚Ä¢ ‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏î‡∏£‡∏ñ 2 ‡∏Ñ‡∏±‡∏ô | ‡∏ü‡∏£‡∏µ‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô 2 ‡∏Ñ‡∏±‡∏ô
‚Ä¢ ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏° (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏à‡∏≥‡∏Å‡∏±‡∏î) 300 ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏∑‡∏ô
üìç ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà: https://maps.app.goo.gl/Hx1n1DxjSvUoYnWC8</template>
  <template id="msg-price-inn1">‡∏•‡∏≠‡∏™‡∏≠‡∏¥‡∏ô‡∏ô‡πå‡∏ô‡∏Ñ‡∏£ ‡∏ä‡∏±‡πâ‡∏ô 1 (Family Room) ‚Äî 2,000 ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏∑‡∏ô (‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏ä‡πâ‡∏≤)
‚Ä¢ ‡∏ó‡∏±‡πâ‡∏á‡∏ä‡∏±‡πâ‡∏ô 1 | ‡∏û‡∏±‡∏Å‡πÑ‡∏î‡πâ 6 ‡∏ó‡πà‡∏≤‡∏ô | 3 ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡∏Ñ‡∏¥‡∏á‡∏™‡πå‡πÑ‡∏ã‡∏™‡πå 3 | ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥ 1
‚Ä¢ ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏•‡∏≤‡∏á + ‡∏°‡∏∏‡∏°‡∏Ñ‡∏£‡∏±‡∏ß‡πÄ‡∏•‡πá‡∏Å
‚Ä¢ ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô 14:00‚Äì21:00 | ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ï‡πå 12:00
‚Ä¢ ‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏î‡∏£‡∏ñ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô | ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏° 300 ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏∑‡∏ô
üìç ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà: https://maps.app.goo.gl/qUUuyqxfyezGRVmG6</template>
  <template id="msg-price-inn2">‡∏•‡∏≠‡∏™‡∏≠‡∏¥‡∏ô‡∏ô‡πå‡∏ô‡∏Ñ‡∏£ ‡∏ä‡∏±‡πâ‡∏ô 2 (Two-Bedroom) ‚Äî 2,500 ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏∑‡∏ô (‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏ä‡πâ‡∏≤)
‚Ä¢ ‡∏ó‡∏±‡πâ‡∏á‡∏ä‡∏±‡πâ‡∏ô 2 | ‡∏û‡∏±‡∏Å‡πÑ‡∏î‡πâ 8 ‡∏ó‡πà‡∏≤‡∏ô | 4 ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡∏Ñ‡∏¥‡∏á‡∏™‡πå‡πÑ‡∏ã‡∏™‡πå 4 (3+1) | ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥ 3
‚Ä¢ ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏•‡∏≤‡∏á + ‡∏°‡∏∏‡∏°‡∏Ñ‡∏£‡∏±‡∏ß‡πÄ‡∏•‡πá‡∏Å
‚Ä¢ ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô 14:00‚Äì21:00 | ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ï‡πå 12:00 | ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏°‡∏µ‡∏ö‡∏±‡∏ô‡πÑ‡∏î
‚Ä¢ ‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏î‡∏£‡∏ñ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô | ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏° 300 ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏∑‡∏ô
üìç ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà: https://maps.app.goo.gl/qUUuyqxfyezGRVmG6</template>
  <template id="msg-price-inn3">‡∏•‡∏≠‡∏™‡∏≠‡∏¥‡∏ô‡∏ô‡πå‡∏ô‡∏Ñ‡∏£ ‡∏ä‡∏±‡πâ‡∏ô 3 (Two-Bedroom) ‚Äî 2,500 ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏∑‡∏ô (‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏ä‡πâ‡∏≤)
‚Ä¢ ‡∏ó‡∏±‡πâ‡∏á‡∏ä‡∏±‡πâ‡∏ô 3 | ‡∏û‡∏±‡∏Å‡πÑ‡∏î‡πâ 8 ‡∏ó‡πà‡∏≤‡∏ô | 4 ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡∏Ñ‡∏¥‡∏á‡∏™‡πå‡πÑ‡∏ã‡∏™‡πå 4 (3+1) | ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥ 3
‚Ä¢ ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏•‡∏≤‡∏á + ‡∏°‡∏∏‡∏°‡∏Ñ‡∏£‡∏±‡∏ß‡πÄ‡∏•‡πá‡∏Å
‚Ä¢ ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô 14:00‚Äì21:00 | ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ï‡πå 12:00 | ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏ö‡∏±‡∏ô‡πÑ‡∏î‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
‚Ä¢ ‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏î‡∏£‡∏ñ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô | ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏° 300 ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏∑‡∏ô
üìç ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà: https://maps.app.goo.gl/qUUuyqxfyezGRVmG6</template>
  <template id="msg-paid">‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡πÇ‡∏≠‡∏ô‡∏°‡∏±‡∏î‡∏à‡∏≥ 50% ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á ‡∏´‡∏•‡∏±‡∏á‡πÇ‡∏≠‡∏ô‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡∏™‡πà‡∏á‡∏™‡∏•‡∏¥‡∏õ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏à‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£ ‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å‡∏Ñ‡πà‡∏∞
‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£: ‡∏ó‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢‡∏ò‡∏ô‡∏ä‡∏≤‡∏ï (TTB)
‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: 321-2-76785-3
‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: ‡∏ö‡∏à‡∏Å.‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô (BAANJERKAN)</template>
  <template id="msg-checkin-house">‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô 14.00-24.00 PM
‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ó‡πå 9.00-12.00 AM 
‡∏Å‡πà‡∏≠‡∏ô‡∏ñ‡∏∂‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 30 ‡∏ô‡∏≤‡∏ó‡∏µ‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡πÇ‡∏ó‡∏£‡πÅ‡∏à‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏ö‡∏≠‡∏£‡πå 
097-2161112 ‡∏´‡∏£‡∏∑‡∏≠ 095-5153834
(‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏≥‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡πÑ‡∏õ‡∏™‡πà‡∏á)</template>
  <template id="msg-checkin-inn">‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô 14.00-21.00 PM
‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ó‡πå 9.00-12.00 AM 
> ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà ‡πÄ‡∏Ñ‡∏≤‡∏ô‡πå‡πÄ‡∏ï‡∏≠‡∏£‡πå ‡πÅ‡∏Ñ‡∏ä‡πÄ‡∏ä‡∏µ‡∏¢‡∏£‡πå ‡∏£‡πâ‡∏≤‡∏ô ‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô‡∏Ñ‡∏£‡∏≤‡∏ü‡∏ó‡πå (‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏ù‡∏≤‡∏Å‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å ‡∏ä‡∏±‡πâ‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î)
> ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ 097-2161112 , 095-5153834</template>
  <template id="msg-map">‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô: https://maps.app.goo.gl/Hx1n1DxjSvUoYnWC8
‡∏•‡∏≠‡∏™‡∏≠‡∏¥‡∏ô‡∏ô‡πå‡∏ô‡∏Ñ‡∏£: https://maps.app.goo.gl/qUUuyqxfyezGRVmG6</template>
  <template id="msg-extra-bed">‡∏°‡∏µ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏à‡∏≥‡∏Å‡∏±‡∏î ‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ 300 ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏∑‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏à‡πâ‡∏á‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</template>
  <template id="msg-pet">‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏≥‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏Ç‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πà‡∏ß‡∏°‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏ô‡∏≠‡∏Å‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å‡∏ó‡πà‡∏≤‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</template>
  <template id="msg-cancel">‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å: ‡πÅ‡∏à‡πâ‡∏á‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡πà‡∏≠‡∏ô‡∏ß‡∏±‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å 7 ‡∏ß‡∏±‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ ‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô / ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 7 ‡∏ß‡∏±‡∏ô ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ</template>

  <script>
    // ---------- DOM ----------
    const $ = sel=>document.querySelector(sel);
    const $list = $('#list'), $q=$('#q');
    const $draft=$('#draft'), $copyAll=$('#copyAll'), $clearAll=$('#clearAll'), $fab=$('#fab'), $composer=$('#composer'), $charCount=$('#charCount');
    let tone='krub';

    // ---------- UTIL ----------
    const toast = document.createElement('div'); toast.className='toast'; toast.id='toast'; toast.textContent='‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‚úì'; document.body.appendChild(toast);
    function setToast(msg='‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‚úì'){ toast.textContent=msg; toast.classList.add('show'); setTimeout(()=> toast.classList.remove('show'), 1300); }
    function getText(id){ return (document.getElementById(id)?.content?.textContent||'').trim(); }
    function normalizeTerms(text){ return text.replace(/‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏ô‡πå/g,'‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô'); }
    function toneAdjust(text){
      text = normalizeTerms(text);
      if(tone==='krub'){ return text.replace(/‡∏ô‡∏∞‡∏Ñ‡∏∞/g,'‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö').replace(/‡∏Ñ‡πà‡∏∞/g,'‡∏Ñ‡∏£‡∏±‡∏ö').replace(/([^‡∏Å-‡πô])‡∏Ñ‡∏∞/g,'$1‡∏Ñ‡∏£‡∏±‡∏ö'); }
      return text;
    }
    function escapeRegExp(str){ return str.replace(/[.*+?^${}()|[\]\\]/g,'\\$&'); }
    function highlight(text, q){ if(!q) return text; try{ const re=new RegExp(escapeRegExp(q),'gi'); return text.replace(re,m=>`<mark>${m}</mark>`);}catch(e){return text;} }
    function copyText(txt){ if(navigator.clipboard && window.isSecureContext){ navigator.clipboard.writeText(txt).then(()=> setToast()).catch(()=> fallback(txt)); } else fallback(txt); }
    function fallback(txt){ const ta=document.createElement('textarea'); ta.value=txt; ta.style.position='fixed'; ta.style.opacity='0'; document.body.appendChild(ta); ta.select(); try{ document.execCommand('copy'); setToast(); } finally{ document.body.removeChild(ta); } }
    function updateCount(){ $charCount.textContent = ($draft.value||'').length + ' ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£'; }

    // ---------- DATA ----------
    const PRESETS = [
      { id:'avail',      title:'1) ‡∏°‡∏µ‡∏´‡πâ‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡πÑ‡∏´‡∏°? (/avail)',           tpl:'msg-avail',        order:[1,1] },
      { id:'no-avail',   title:'1) ‡∏°‡∏µ‡∏´‡πâ‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡πÑ‡∏´‡∏°? (/no-avail)',        tpl:'msg-no-avail',     order:[1,2] },
      { id:'price-house',title:'2) ‡∏£‡∏≤‡∏Ñ‡∏≤ + ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î (‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô) (/price-house)', tpl:'msg-price-house', order:[2,1] },
      { id:'price-inn1', title:'2) ‡∏£‡∏≤‡∏Ñ‡∏≤ + ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î (‡∏•‡∏≠‡∏™‡∏≠‡∏¥‡∏ô‡∏ô‡πå‡∏ô‡∏Ñ‡∏£ ‡∏ä‡∏±‡πâ‡∏ô 1) (/price-inn1)', tpl:'msg-price-inn1', order:[2,2] },
      { id:'price-inn2', title:'2) ‡∏£‡∏≤‡∏Ñ‡∏≤ + ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î (‡∏•‡∏≠‡∏™‡∏≠‡∏¥‡∏ô‡∏ô‡πå‡∏ô‡∏Ñ‡∏£ ‡∏ä‡∏±‡πâ‡∏ô 2) (/price-inn2)', tpl:'msg-price-inn2', order:[2,3] },
      { id:'price-inn3', title:'2) ‡∏£‡∏≤‡∏Ñ‡∏≤ + ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î (‡∏•‡∏≠‡∏™‡∏≠‡∏¥‡∏ô‡∏ô‡πå‡∏ô‡∏Ñ‡∏£ ‡∏ä‡∏±‡πâ‡∏ô 3) (/price-inn3)', tpl:'msg-price-inn3', order:[2,4] },
      { id:'paid',       title:'3) ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô/‡∏°‡∏±‡∏î‡∏à‡∏≥ (/paid)',       tpl:'msg-paid',         order:[3,1] },
      { id:'confirm-book', title:'4.1) ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á (‡∏Å‡∏£‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà) (/confirm-book)', tpl:null, type:'confirm', order:[4,1] },
      { id:'checkin-house',title:'4.2.1) ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô ‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô (/checkin-house)', tpl:'msg-checkin-house', order:[4,2,1] },
      { id:'checkin-inn',  title:'4.2.2) ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô ‡∏•‡∏≠‡∏™‡∏≠‡∏¥‡∏ô‡∏ô‡πå‡∏ô‡∏Ñ‡∏£ (/checkin-inn)', tpl:'msg-checkin-inn',  order:[4,2,2] },
      { id:'map',        title:'5) ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà (/map)',                      tpl:'msg-map',          order:[5,1] },
      { id:'extra-bed',  title:'6) ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏° (/extra-bed)',           tpl:'msg-extra-bed',    order:[6,1] },
      { id:'pet',        title:'7) ‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á (/pet)',                tpl:'msg-pet',          order:[7,1] },
      { id:'cancel',     title:'8) ‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (/cancel)',               tpl:'msg-cancel',       order:[8,1] },
    ];
    const SECTION_NAMES = {
      1:'1) ‡∏°‡∏µ‡∏´‡πâ‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡πÑ‡∏´‡∏°?',
      2:'2) ‡∏£‡∏≤‡∏Ñ‡∏≤ + ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î',
      3:'3) ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô/‡∏°‡∏±‡∏î‡∏à‡∏≥',
      4:'4) ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á + ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô',
      5:'5) ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà',
      6:'6) ‡∏™‡∏¥‡πà‡∏á‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏î‡∏ß‡∏Å',
      7:'7) ‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢',
      8:'8) ‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å'
    };

    // ---------- RENDER ----------
    function sectionRowHTML(main){ const name=SECTION_NAMES[main]||`‡∏´‡∏°‡∏ß‡∏î ${main}`; return `<div class="section"><span class="dot"></span><div>${name}</div></div>`; }
    function compareOrder(a,b){ const A=a.order||[], B=b.order||[], L=Math.max(A.length,B.length); for(let i=0;i<L;i++){ const ai=A[i]??0, bi=B[i]??0; if(ai!==bi) return ai-bi; } return 0; }
    function rowTextHTML(p, q){
      const text=getText(p.tpl)||'';
      return `<div class="item open" data-id="${p.id}">
        <div class="i-main">
          <div class="i-title">${p.title}</div>
          <div class="i-sub">${p.tpl ? '/'+p.id : ''}</div>
          <div class="preview"><pre><code>${highlight(text,q)}</code></pre></div>
        </div>
        <div class="i-actions">
          <button class="primary" data-act="copy" data-tpl="${p.tpl||''}">üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å</button>
          <button data-act="add" data-tpl="${p.tpl||''}">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏£‡πà‡∏≤‡∏á</button>
        </div>
      </div>`;
    }
    function itemRowConfirm(p){
      const controls = `
        <div class="inline-controls" style="display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin:6px 0 4px">
          <span class="kv">‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô</span><input type="date" class="ci" />
          <span class="kv">‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ó‡πå</span><input type="date" class="co" />
          <span class="kv">‡∏Ñ‡∏∑‡∏ô</span><input class="nights" size="3" readonly value="1" />
        </div>`;
      const body = `
        <div class="preview">
          <pre><code class="cp">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‚Ä¶</code></pre>
        </div>`;
      return `
      <div class="item open" data-id="${p.id}" data-type="confirm">
        <div class="i-main">
          <div class="i-title">${p.title}</div>
          <div class="i-sub">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</div>
          ${controls}
        </div>
        <div class="i-actions">
          <button class="primary" data-act="copy">üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å</button>
          <button data-act="add">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏£‡πà‡∏≤‡∏á</button>
        </div>
        ${body}
      </div>`;
    }

    function fmtDDMMYY(d){ const dt=new Date(d); if(isNaN(dt)) return ''; const dd=('0'+dt.getDate()).slice(-2); const mm=('0'+(dt.getMonth()+1)).slice(-2); const yy=(dt.getFullYear()+'').slice(-2); return `${dd}/${mm}/${yy}`; }
    function calcNights(ci,co){ const a=new Date(ci), b=new Date(co); if(isNaN(a)||isNaN(b)) return 0; return Math.round((b-a)/86400000); }
    function buildConfirmMessage(ci,co){ const n=calcNights(ci,co); if(n<1) return ''; return `‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô ${fmtDDMMYY(ci)} ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ó‡πå ${fmtDDMMYY(co)} ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô${n} ‡∏Ñ‡∏∑‡∏ô\n‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡∏Ç‡∏≠ ‡∏ä‡∏∑‡πà‡∏≠ ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• ‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£`; }

    function renderList(){
      const q=($q.value||'').trim().toLowerCase();
      const items=PRESETS.filter(p=> !q || p.title.toLowerCase().includes(q) || (p.tpl && getText(p.tpl).toLowerCase().includes(q))).sort(compareOrder);
      let html='', prev=null;
      items.forEach(p=>{ const main=p.order?.[0]||0; if(main!==prev){ html+=sectionRowHTML(main); prev=main; } html+= (p.type==='confirm') ? itemRowConfirm(p) : rowTextHTML(p, ($q.value||'')); });
      $list.innerHTML = html || '<div class="muted" style="padding:8px 2px">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</div>';
      initConfirmRows();
    }

    function initConfirmRows(){
      document.querySelectorAll('.item[data-type="confirm"]').forEach(row=>{
        const ci=row.querySelector('.ci'), co=row.querySelector('.co'), nights=row.querySelector('.nights'), cp=row.querySelector('.cp');
        const toISO=d=> d.toISOString().slice(0,10);
        const today=new Date(), tmr=new Date(Date.now()+86400000);
        if(!ci.value) ci.value=toISO(today);
        if(!co.value) co.value=toISO(tmr);
        function update(){ const n=Math.max(0, calcNights(ci.value,co.value)); nights.value=n>0?n:''; const msg=buildConfirmMessage(ci.value,co.value); cp.textContent=msg || '‡πÇ‡∏õ‡∏£‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏Ñ‡∏∑‡∏ô)'; }
        ci.addEventListener('change', update); co.addEventListener('change', update); update();
      });
    }

    // ---------- EVENTS ----------
    $list.addEventListener('click', (e)=>{
      const btn=e.target.closest('button'); if(!btn) return;
      const row=e.target.closest('.item'); const act=btn.dataset.act; if(!row) return;
      const type=row.dataset.type; const tplId=btn.dataset.tpl;
      if(type==='confirm'){
        const ci=row.querySelector('.ci').value, co=row.querySelector('.co').value;
        const msg=buildConfirmMessage(ci,co); if(!msg){ setToast('‡πÇ‡∏õ‡∏£‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á'); return; }
        if(act==='copy'){ copyText(toneAdjust(msg)); }
        if(act==='add'){ const cur=$draft.value.trim(); $draft.value = cur ? (cur+"\n\n"+toneAdjust(msg)) : toneAdjust(msg); updateCount(); setToast('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏£‡πà‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß'); }
        return;
      }
      const txt = toneAdjust(getText(tplId));
      if(act==='copy'){ copyText(txt); }
      if(act==='add'){ const cur=$draft.value.trim(); $draft.value = cur ? (cur+"\n\n"+txt) : txt; updateCount(); setToast('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏£‡πà‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß'); }
    });

    $q.addEventListener('input', renderList);

    // Composer controls
    function isMobile(){ return window.matchMedia('(max-width: 768px)').matches; }
    $fab.addEventListener('click', ()=>{ $composer.classList.toggle('open'); });
    $copyAll.addEventListener('click', ()=> copyText($draft.value||''));
    $clearAll.addEventListener('click', ()=>{ $draft.value=''; updateCount(); });
    $draft.addEventListener('input', updateCount);
    updateCount();

    // Tone
    document.getElementById('tone-ka').onclick=()=>{ tone='ka'; document.getElementById('tone-ka').setAttribute('aria-pressed','true'); document.getElementById('tone-krub').setAttribute('aria-pressed','false'); };
    document.getElementById('tone-krub').onclick=()=>{ tone='krub'; document.getElementById('tone-ka').setAttribute('aria-pressed','false'); document.getElementById('tone-krub').setAttribute('aria-pressed','true'); };

    // Init
    renderList();
  </script>
</body>
</html>
